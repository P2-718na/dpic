\colorlet{shadecolor}{lightgray!50}
\newtheorem{thm-env}{Teorema} % is it right?
\newtheorem{def-env}{Definizione} % is it right?
\newtheorem{ex-env}{Esempio} % is it right?
\newenvironment{thm}
{
    \begin{shaded}
    \begin{thm-env}
}
{
    \end{thm-env}
    \end{shaded}
}

\newenvironment{definition}
{
    \begin{shaded}
    \begin{def-env}
}
{
    \end{def-env}
    \end{shaded}
}

\newenvironment{example}
{
    \begin{framed}
        \begin{ex-env}
        }
        {
        \end{ex-env}
    \end{framed}
}
